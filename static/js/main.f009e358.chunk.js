(this.webpackJsonpstreamlab=this.webpackJsonpstreamlab||[]).push([[0],{185:function(e,t,a){e.exports=a.p+"static/media/replay-logo.db4d89bd.svg"},188:function(e,t,a){e.exports=a.p+"static/media/streamlab-logo.6081168a.svg"},204:function(e,t,a){e.exports=a(308)},209:function(e,t,a){},304:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),l=a(57),i=a.n(l),c=(a(209),a(342)),s=a(346),u=a(322),m=a(325),d=a(4),f=a(345),p=a(332),y=a(334),b=a(194),h=a(335),E=a(42),O=a(3),v=a(61),g=a(347),R=a(343),S=a(329),j=a(330),A=a(328),D=a(38),L=a(320);!function(e){e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6"}(r||(r={}));var T,C,x,I,w,k,_,P,N=function(e){var t=e.level,a=e.children,n=Object(D.a)(e,["level","children"]);return o.a.createElement(L.a,Object.assign({as:t},function(e){switch(e){case r.H1:return{size:"md",my:1,mx:4,px:1};case r.H2:return{size:"sm",m:0,p:1,textAlign:"left"};case r.H3:return{size:"md",my:4};case r.H4:return{size:"sm",my:4};case r.H6:return{size:"sm",fontWeight:"normal",justifySelf:"center"};default:return{size:"sm"}}}(t),n),a)},H=a(14),M=a(73);!function(e){e[e.AUTO=0]="AUTO"}(I||(I={})),function(e){e[e.DASH=1]="DASH",e[e.HLS=2]="HLS",e[e.PROGRESSIVE=3]="PROGRESSIVE",e[e.MSS=4]="MSS"}(w||(w={})),function(e){e[e.WIDEVINE=1]="WIDEVINE",e[e.PLAYREADY=2]="PLAYREADY",e[e.FAIRPLAY=3]="FAIRPLAY"}(k||(k={})),function(e){e[e.WEBVTT=1]="WEBVTT",e[e.TTML=2]="TTML",e[e.SRT=3]="SRT"}(_||(_={})),function(e){e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e[e.VERBOSE=5]="VERBOSE"}(P||(P={}));var Y={AUTO:"Automatic selection",SHAKA_PLAYER:"Shaka Player",HLS_JS:"HLS.js",RX_PLAYER:"RxPlayer",HTML:"Native browser playback through HTML <video> element"},U=P.WARNING,F=(T={},Object(H.a)(T,w.DASH,"application/dash+xml"),Object(H.a)(T,w.HLS,"application/x-mpegurl"),Object(H.a)(T,w.PROGRESSIVE,"video/mp4"),Object(H.a)(T,w.MSS,"application/vnd.ms-sstr+xml"),T),G=Object.entries(F).map((function(e){return e.reverse()})).reduce((function(e,t){var a=Object(d.a)(t,2),r=a[0],n=a[1];return e[r]=Number(n),e}),{}),W=(C={},Object(H.a)(C,k.WIDEVINE,"com.widevine.alpha"),Object(H.a)(C,k.PLAYREADY,"com.microsoft.playready"),Object(H.a)(C,k.FAIRPLAY,"com.apple.fps.1_0"),C),V=(x={},Object(H.a)(x,_.WEBVTT,"text/vtt"),Object(H.a)(x,_.TTML,"application/ttml+xml"),Object(H.a)(x,_.SRT,"text/srt"),x),B=[{key:I.AUTO,label:"Auto"},{key:w.DASH,label:"MPEG-DASH"},{key:w.HLS,label:"HLS"},{key:w.MSS,label:"Smooth stream"},{key:w.PROGRESSIVE,label:"Progressive video"}],z=[{key:k.WIDEVINE,label:"Widevine"},{key:k.PLAYREADY,label:"PlayReady"},{key:k.FAIRPLAY,label:"FairPlay"}],J=[{key:I.AUTO,label:"Auto"},{key:_.WEBVTT,label:"WebVTT"},{key:_.TTML,label:"TTML (DXFP)"}],q=function(e){return M.streamTypes.find((function(t){var a=t.urlMatch,r=t.urlNotMatch;return r?a.test(e)&&!r.test(e):a.test(e)}))},X=function(e){var t=q(e);if(t)return G[t.contentTypes[0]]},K=function(e){return/\.vtt/.test(e)?_.WEBVTT:/(\.ttml|\.dxfp|\.xml)/.test(e)?_.TTML:/\.srt/.test(e)?_.SRT:void 0},Z=function(e,t){return(t.find((function(t){return t.key===e}))||t[0]||{label:""}).label},$=function(e){var t=e.streamResource,a=e.drmLicenseResource,r=e.drmCertificateResource,n=e.subtitlesResource,o=e.startOffset,l=t.url,i=""===o?void 0:o;if(l){var c=t.technology===I.AUTO?function(e){if(e)return e.contentTypes[0]}(q(l)):F[t.technology];if(c){var s={streamUrl:l,contentType:c,startPosition:i};if(a){var u=a.url;if(u){if(s.licenseUrl=u,s.drmType=a.technology!==I.AUTO?W[a.technology]:void 0,s.licenseAcquisitionDetails={},a&&a.headers.length){var m={};a.headers.forEach((function(e){return m[e.name]=e.value})),s.licenseAcquisitionDetails.licenseRequestHeaders=m}var d=r&&r.url;d&&(a.technology===k.WIDEVINE?s.licenseAcquisitionDetails.widevineServiceCertificateUrl=d:a.technology===k.FAIRPLAY&&(s.licenseAcquisitionDetails.fairPlayCertificateUrl=d))}}if(n){var f=n.url;if(f){var p=n.technology===I.AUTO?K(f):n.technology;if(p){var y=V[p],b=f.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),h=b&&b[2],E="Subtitles file from ".concat(h);s.textTracks=[{contentType:y,src:f,label:E}]}}}return s}}},Q=function(e){var t=Object.entries(P).find((function(t){var a=Object(d.a)(t,2),r=(a[0],a[1]);return e===r}));return t&&t[0]},ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&";if(e.length>1){var r=e.substr(1).split("&").filter((function(e){return 0!==e.indexOf(t)})).join("&");if(r.length>1)return a+r}return""},te=function(e){try{var t=function(e,t){return e.length&&e.substr(1).split("&").find((function(e){return e.startsWith(t)}))}(e,"s=");if(t){var a=t.substr("s=".length);if(a.length)return JSON.parse(decodeURIComponent(a))}}catch(r){console.error('Bad format/encoding of setup parameter ("'.concat("s=",'").'))}},ae=function(e,t){var a,r=t.origin,n=t.pathname,o=t.search;return"".concat(r).concat(n,"?").concat("s=").concat((a=JSON.stringify(e),encodeURIComponent(a).replace(/%7B/g,"{").replace(/%7D/g,"}").replace(/%2C/g,",").replace(/%3A/g,":").replace(/%5B/g,"[").replace(/%5D/g,"]"))).concat(ee(o,"s="))},re=function(){return window.history.pushState({},document.title,function(e){var t=e.pathname,a=e.search;return t+ee(a,"s=","?")}(document.location))},ne=function(e){return"streamResource"in e?{type:"STREAM_RESOURCE_FIELD_CHANGE",value:e.streamResource}:"drmLicenseResource"in e?{type:"DRM_LICENSE_RESOURCE_FIELD_CHANGE",value:e.drmLicenseResource}:"drmCertificateResource"in e?{type:"DRM_CERTIFICATE_RESOURCE_FIELD_CHANGE",value:e.drmCertificateResource}:"subtitlesResource"in e?{type:"SUBTITLES_RESOURCE_FIELD_CHANGE",value:e.subtitlesResource}:{type:"START_OFFSET_FIELD_CHANGE",value:e.startOffset}},oe=function(e,t){return{type:"APPLY_BROWSER_ENVIRONMENT",value:{supportedDrmTechnologies:function(e){return Object(M.isLegacyMicrosoft)(e)?[k.PLAYREADY]:Object(M.isChromiumEdgeOnWindows)(e)?[k.PLAYREADY,k.WIDEVINE]:Object(M.isSafari)(e)?[k.FAIRPLAY]:[k.WIDEVINE]}(e),urlSetup:te(t)}}},le=a(8),ie=a(24),ce=a(321),se=a(323),ue=a(324),me=function(e){var t=e.headers,a=void 0===t?[]:t,r=e.onHeadersChange,l=Object(D.a)(e,["headers","onHeadersChange"]),i=Object(n.useState)([]),c=Object(d.a)(i,2),s=c[0],f=c[1],p=Object(n.useRef)();Object(n.useEffect)((function(){var e=p.current;e?e.length<a.length?f([].concat(Object(ie.a)(s),[!0])):e.length>a.length&&f(new Array(a.length).fill(!0)):f(new Array(a.length).fill(!0)),p.current=a}),[a,s]);return o.a.createElement(m.a,Object.assign({mb:a.length?4:0},l),a.map&&a.map(function(e,t,a,r){return function(n,l,i){var c=n.name,s=n.value,m=n.id;return o.a.createElement(ce.a,{key:m,in:e[l],onAnimationComplete:function(){return a(l)}},o.a.createElement(u.a,{direction:"row",py:2},o.a.createElement(g.a,{flex:"1 2 auto",placeholder:"Header name",mr:2,value:c,onChange:function(e){return t({name:e.target.value,value:s,id:m},l)}}),o.a.createElement(g.a,{flex:"2 1 auto",placeholder:"Header value",mr:2,value:s,onChange:function(e){return t({name:c,value:e.target.value,id:m},l)}}),o.a.createElement(se.a,{flex:"0","aria-label":"Remove",icon:o.a.createElement(ue.a,null),onClick:function(){return r(l)},mr:2})))}}(s,(function(e,t){var n=a.slice(0);n[t]=e,r(n)}),(function(e){if(!s[e]){var t=a.slice(0);t.splice(e,1),r(t)}}),(function(e){s[e]=!1,f(Object(ie.a)(s))}))))},de=function(e){return z.filter((function(t){var a=t.key;return e.indexOf(a)>=0}))},fe=function(e){e.id;var t=e.url,a=e.label,r=(e.useProxy,e.headers),n=e.technology,l=e.techOptions,i=e.onChange,c=e.isHeadersEnabled;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{gridColumn:c?1:"1/span 2"},o.a.createElement(g.a,{onChange:function(e){return i({url:e.target.value})},placeholder:a,type:"url",value:t})),c&&o.a.createElement(b.a,{onClick:function(){return i({headers:r.concat({name:"",value:"",id:Date.now()})})}},"Add header"),l.length>1?o.a.createElement(R.a,null,o.a.createElement(R.b,{as:b.a,rightIcon:o.a.createElement(A.a,null)},Z(n,l)),o.a.createElement(R.d,null,l.map((function(e,t){var a=e.key,r=e.label;return o.a.createElement(R.c,{key:t,onClick:function(){return i({technology:a})}},r)})))):o.a.createElement(b.a,{isDisabled:!0},Z(n,l)),!1,o.a.createElement(m.a,{gridColumn:"1/span 4"},o.a.createElement(me,{onHeadersChange:function(e){return i({headers:e})},headers:r})))},pe=function(){var e=Object(le.c)((function(e){return Object(O.a)({},e.streamDetails)})),t=e.streamResource,a=e.drmLicenseResource,n=e.drmCertificateResource,l=e.subtitlesResource,i=e.startOffset,c=e.supportedDrmTechnologies,s=void 0===c?[k.WIDEVINE]:c,u=e.isDrmCertificateApplicable,d=Object(le.b)(),f=function(e){return re(),d(ne(e))};return o.a.createElement("form",null,o.a.createElement(m.a,{display:"grid",gridTemplateColumns:"1fr auto auto",gridAutoRows:"auto",gridGap:2,alignItems:"center"},o.a.createElement(N,{level:r.H6,justifySelf:"left",gridColumn:"1/span 2"},"URLs"),o.a.createElement(N,{level:r.H6},"Technology"),!1,o.a.createElement(fe,Object.assign({id:"stream",label:"Stream URL",techOptions:B,isHeadersEnabled:!1,onChange:function(e){return f({streamResource:e})}},t)),o.a.createElement(fe,Object.assign({label:"DRM license URL",id:"license",techOptions:de(s),isHeadersEnabled:!0,onChange:function(e){return f({drmLicenseResource:e})}},a)),u&&o.a.createElement(fe,Object.assign({id:"certificate",label:"DRM certificate URL",techOptions:de([a.technology]),isHeadersEnabled:!1,onChange:function(e){return f({drmCertificateResource:e})}},n)),o.a.createElement(fe,Object.assign({id:"subtitles",label:"Subtitles URL",techOptions:J,isHeadersEnabled:!1,onChange:function(e){return f({subtitlesResource:e})}},l))),o.a.createElement(v.a,{display:"flex",alignItems:"center",mt:2},o.a.createElement(j.a,{htmlFor:"startOffsetField"},"Start offset:"),o.a.createElement(g.a,{id:"startOffsetField",type:"number",step:.001,value:i,width:24,textAlign:"right",min:0,onChange:function(e){return f({startOffset:""===e.target.value?"":Number(e.target.value)})}}),o.a.createElement(v.b,{mx:2,mb:3},"seconds")))},ye=a(331),be=a(333),he=a(180),Ee=(a(216),a(217),a(218),a(219),a(220),a(181)),Oe=a.n(Ee);window.jsonlint=Oe.a;var ve,ge=function(e){var t=e.value,a=e.onChange;return o.a.createElement(he.Controlled,{value:t,options:{mode:"application/json",theme:"default",lineNumbers:!0,tabSize:2,gutters:["CodeMirror-lint-markers"],lint:t&&t.trim()},onBeforeChange:function(e,t,r){return a(r)}})},Re=function(){var e=Object(le.c)((function(e){return Object(O.a)({},e.playerOptions)})),t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration,n=e.playerLibrary,l=Object(le.b)();return o.a.createElement("form",null,o.a.createElement(ye.a,{templateColumns:"auto 1fr",gap:4,my:2,alignItems:"center"},o.a.createElement(R.a,null,o.a.createElement(R.b,{as:b.a,rightIcon:o.a.createElement(A.a,null),style:{justifySelf:"end"}},Y[n]),o.a.createElement(R.d,null,Object.entries(Y).map((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return o.a.createElement(R.c,{key:a,onClick:function(){return function(e){re(),l(function(e){return{type:"SET_PLAYER_LIBRARY",value:e}}(e))}(a)}},r)})))),o.a.createElement(j.a,null,"Player library to use for playback"),o.a.createElement(S.a,{id:"playback-monitor-switch",style:{justifySelf:"end"},isChecked:a,onChange:function(e){return re(),l({type:"TOGGLE_PLAYBACK_MONITOR",value:e.target.checked})}},"\xa0"),o.a.createElement(j.a,{htmlFor:"playback-monitor-switch"},"Display playback monitor overlay at startup"),o.a.createElement(R.a,null,o.a.createElement(R.b,{as:b.a,rightIcon:o.a.createElement(A.a,null),style:{justifySelf:"end"}},Q(t)),o.a.createElement(R.d,null,Object.entries(P).filter((function(e){var t=Object(d.a)(e,1)[0];return!isNaN(Number(P[t]))})).map((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return o.a.createElement(R.c,{key:r,onClick:function(){return function(e){re(),l(function(e){return{type:"SET_LOG_LEVEL",value:e}}(e))}(Number(r))}},a)})))),o.a.createElement(j.a,null,"Player log level (for messages to the JS console)")),o.a.createElement(p.a,{mt:4,mb:1},"Player configuration overrides according to"," ",o.a.createElement(be.a,{href:"https://vimond.github.io/replay/#/custom-replay/configuration",isExternal:!0,style:{textDecoration:"underline"}},"Replay documentation"),":"),o.a.createElement(ge,{value:r,onChange:function(e){return re(),l(function(e){return{type:"SET_PLAYER_CONFIGURATION",value:e}}(e))}}))},Se=function(e){return{timestamp:(new Date).toISOString(),name:"",formData:{streamDetails:{streamResource:{url:e.streamResource.url,technology:e.streamResource.technology}}}}},je=function(e){e.supportedDrmTechnologies;return Object(D.a)(e,["supportedDrmTechnologies"])},Ae=function(e,t){return{timestamp:(new Date).toISOString(),name:"",formData:{streamDetails:je(e),playerOptions:t}}},De=function(e,t){var a=t().streamDetails,r=a.streamResource,n=$({streamResource:r});n&&e({type:"PLAY",value:{source:n,historyEntry:Se(a)}})},Le=function(e,t){var a=t(),r=a.streamDetails,n=a.playerOptions,o=$(r),l=function(e){var t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration.trim(),n={};if(r)try{n=JSON.parse(r)}catch(o){}return n.videoStreamer=n.videoStreamer||{},n.videoStreamer.logLevel=Q(t),n.playbackMonitor=n.playbackMonitor||{},n.playbackMonitor.visibleAtStart=a,n}(n),i=n.playerLibrary;o&&e({type:"PLAY",value:{source:o,options:l,playerLibraryOverride:i,historyEntry:Ae(Object(O.a)(Object(O.a)({},r),{},{startOffset:""}),n)}})},Te=function(e){return e({type:"STOP"})},Ce=function(e){var t=e.header,a=e.isRequired;return o.a.createElement(f.b,{backgroundColor:"gray.100"},o.a.createElement(N,{level:r.H2,flex:"1",lineHeight:1},t,!a&&o.a.createElement(p.a,{as:"em",fontStyle:"normal",color:"gray.500",fontWeight:"normal",ml:"4"}," ","optional")),o.a.createElement(f.c,null))},xe=function(){var e=Object(le.c)((function(e){return e.ui.expandedAdvancedAccordionIndices})),t=Object(le.c)((function(e){return!!e.player.source})),a=Object(le.c)((function(e){return!!e.streamDetails.streamResource.url})),r=Object(le.c)((function(e){return!!e.playerOptions.isModified})),n=o.a.useState(!1),l=Object(d.a)(n,2),i=l[0],c=l[1],s=Object(le.b)(),m=function(){return c(!1)},p=o.a.useRef(null);return o.a.createElement(y.a,null,o.a.createElement(f.a,{defaultIndex:e,allowMultiple:!0,onChange:function(e){return s({type:"ADVANCED_ACCORDION_CHANGE",value:e})}},o.a.createElement(f.d,null,o.a.createElement(Ce,{header:"Stream details",isRequired:!0}),o.a.createElement(f.e,{ml:2,mt:1,backgroundColor:"White"},o.a.createElement(pe,null))),o.a.createElement(f.d,null,o.a.createElement(Ce,{header:"Player options".concat(r?" *":"")}),o.a.createElement(f.e,{ml:2,mt:1,backgroundColor:"White"},o.a.createElement(Re,null)))),o.a.createElement(u.a,{justify:"center",py:4},o.a.createElement(b.a,{colorScheme:"green",onClick:function(e){e.currentTarget.blur(),s(Le)},mx:4,isDisabled:!a},"Play"),o.a.createElement(b.a,{colorScheme:"red",onClick:function(){return s(Te)},isDisabled:!t},"Stop"),o.a.createElement(b.a,{colorScheme:"red",variant:"outline",onClick:function(){return c(!0)},mx:4},"Clear all forms"),o.a.createElement(h.a,{leastDestructiveRef:p,isOpen:i,onClose:m},o.a.createElement(E.f,null),o.a.createElement(h.b,null,o.a.createElement(E.e,{fontSize:"lg",fontWeight:"bold"},"Clear forms"),o.a.createElement(E.b,null,"Are you sure you want to empty all form fields? You cannot undo this action afterwards."),o.a.createElement(E.d,null,o.a.createElement(b.a,{ref:p,onClick:m},"Cancel"),o.a.createElement(b.a,{colorScheme:"red",onClick:function(){c(!1),re(),s({type:"CLEAR_FORMS"})},ml:3},"Clear forms"))))))},Ie=a(349),we=a(338),ke=a(336),_e=a(348),Pe=a(337),Ne=function(e,t){var a=e.text,r=e.level,n=e.link;return o.a.createElement(ke.b,{key:t},o.a.createElement(_e.a,{status:r,alignItems:"flex-start",style:{overflowX:"auto"}},o.a.createElement(_e.b,{flex:"0 0 1rem"}),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(be.a,{href:n,isExternal:!0},a),o.a.createElement(be.a,{alignSelf:"center",mx:2,href:n,isExternal:!0},o.a.createElement(Pe.a,null))):a))},He=function(){var e=Object(le.c)((function(e){return e.information.messages}));return o.a.createElement(m.a,{height:"100%"},o.a.createElement(ke.a,{styleType:"none"},e.map(Ne)))},Me=a(344);!function(e){e[e.BOTH=0]="BOTH",e[e.NAMED=1]="NAMED",e[e.UNNAMED=2]="UNNAMED"}(ve||(ve={}));var Ye,Ue=function(e){return e.replace(/T/," ").substr(0,16)},Fe=function(e){if(e.name)return e.name;var t=e.formData.streamDetails.streamResource,a=t.url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),r=a&&a[2],n=function(e){var t=e.url,a=e.technology;return Z(a===I.AUTO?X(t):a,B)}(t),o=n.indexOf("stream")<0?" stream":"";return"".concat(n).concat(o," on ").concat(r||"[unknown host]")},Ge=function(e){var t=e.entry,a=e.isSelected,r=e.handleClick;return o.a.createElement(m.a,{as:"li",p:2,cursor:"pointer",backgroundColor:a?"gray.200":void 0,_hover:{backgroundColor:"gray.100"},style:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},color:t.name?void 0:"gray.500",onClick:r,title:Ue(t.timestamp)+" "+Fe(t)},t.error&&o.a.createElement(we.a,{colorScheme:"red",mt:"-0.2em",title:"This playback attempt failed with an error: ".concat(t.error.message)},"Err")," ",Fe(t)+(t.name?"":", "+Ue(t.timestamp)))},We=function(e){return!(!e.url&&!e.headers.length)},Ve={userSelect:"text",backgroundColor:"#F7FAFC",padding:"0.2rem",border:"none",height:"auto",marginBottom:"0.2rem"},Be=function(e){var t=e.id,a=e.name,r=e.value;return o.a.createElement(o.a.Fragment,{key:t},o.a.createElement(g.a,{type:"text",value:a,isReadOnly:!0,style:Ve}),o.a.createElement(g.a,{type:"text",value:r,isReadOnly:!0,style:Ve}))},ze=function(e){var t=e.label,a=e.resource,r=e.techLabels;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},t," URL"),o.a.createElement(g.a,{type:"url",value:a.url,isReadOnly:!0,style:Ve}),"useProxy"in a&&a.useProxy&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},"Use proxy"),o.a.createElement(Me.a,{isChecked:!0,isReadOnly:!0})),a.technology!==I.AUTO&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},t," technology"),o.a.createElement(g.a,{type:"text",value:Z(a.technology,r),isReadOnly:!0,style:Ve})),"headers"in a&&a.headers.some((function(e){var t=e.name,a=e.value;return t||a}))?o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{alignSelf:"start",justifySelf:"right"},t," headers"),o.a.createElement(ye.a,{templateColumns:"1fr 3fr",gap:2,alignItems:"center"},a.headers.map(Be))):"")},Je=function(){var e=Object(le.c)((function(e){return e.history.history})),t=Object(le.c)((function(e){return e.history.selectedEntry})),a=o.a.useState(!1),n=Object(d.a)(a,2),l=n[0],i=n[1],c=function(){return i(!1)},s=Object(le.b)(),f=function(){return s({type:"DELETE_HISTORY"})},y=o.a.useRef(null);return o.a.createElement(m.a,{mx:4},o.a.createElement(m.a,null,o.a.createElement(N,{level:r.H4},"Form history"),o.a.createElement(p.a,null,"The form data from each playback attempt is registered in the entries below. Duplicates are listed once with their last playback time. Select for inspection and restoration back into the forms:"),!!e.length&&o.a.createElement(ke.a,{overflowY:"scroll",backgroundColor:"white",minHeight:32,maxHeight:64,my:2,borderWidth:"1px",rounded:"md",borderColor:"gray.400"},e.slice(0).reverse().map((function(e){return o.a.createElement(Ge,{key:e.timestamp,entry:e,handleClick:function(){return function(e){return s({type:"SELECT_HISTORY_ENTRY",value:e})}(e)},isSelected:!(!t||e.timestamp!==t.timestamp)})})))),t&&o.a.createElement(m.a,{mt:4,p:2,backgroundColor:"gray.200",rounded:"md"},o.a.createElement(ye.a,{templateColumns:t.error?"auto auto 1fr":"auto 1fr",gap:4,alignItems:"center",title:t.error?"Unsuccessful playback attempt: ".concat(t.error.message||t.error.code||t.error):void 0},t.error&&o.a.createElement(we.a,{colorScheme:"red",mt:"-0.2em",title:"This playback attempt failed with an error: ".concat(t.error.message)},"Err"),o.a.createElement(N,{level:r.H4},Ue(t.timestamp)),o.a.createElement(g.a,{type:"text",placeholder:"Enter a name for this entry",value:t.name,onChange:function(e){return s({type:"UPDATE_HISTORY_ENTRY_NAME",value:e.target.value})},backgroundColor:"White"})),o.a.createElement(p.a,null,"The details below can be reapplied to the form fields by pressing Restore. Note that fields not included in the stored data will be cleared."),o.a.createElement(ye.a,{mt:2,templateColumns:"auto 1fr",rowGap:1,columnGap:0,alignItems:"center"},o.a.createElement(ze,{label:"Stream",resource:t.formData.streamDetails.streamResource,techLabels:B}),"drmLicenseResource"in t.formData.streamDetails&&We(t.formData.streamDetails.drmLicenseResource)&&o.a.createElement(ze,{label:"DRM license",resource:Object(O.a)(Object(O.a)({},t.formData.streamDetails.drmLicenseResource),{},{technology:I.AUTO}),techLabels:z}),"drmCertificateResource"in t.formData.streamDetails&&We(t.formData.streamDetails.drmCertificateResource)&&o.a.createElement(ze,{label:"DRM certificate",resource:t.formData.streamDetails.drmCertificateResource,techLabels:z}),"subtitlesResource"in t.formData.streamDetails&&We(t.formData.streamDetails.subtitlesResource)&&o.a.createElement(ze,{label:"Subtitles",resource:t.formData.streamDetails.subtitlesResource,techLabels:J}),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.showPlaybackMonitor&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},"Show playback monitor"),o.a.createElement(Me.a,{isChecked:!0,isReadOnly:!0})),"playerOptions"in t.formData&&t.formData.playerOptions&&"AUTO"!==t.formData.playerOptions.playerLibrary&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},"Player library"),o.a.createElement(g.a,{type:"text",value:Y[t.formData.playerOptions.playerLibrary],isReadOnly:!0,style:Ve})),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.logLevel!==U&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},"Player log level"),o.a.createElement(g.a,{type:"text",value:Q(t.formData.playerOptions.logLevel),isReadOnly:!0,style:Ve})),"playerOptions"in t.formData&&t.formData.playerOptions&&t.formData.playerOptions.customConfiguration&&t.formData.playerOptions.customConfiguration.trim()&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{justifySelf:"right"},"Custom configuration"),o.a.createElement(g.a,{type:"text",value:t.formData.playerOptions.customConfiguration.trim(),isReadOnly:!0,style:Ve}))),o.a.createElement(u.a,{justify:"center",pt:4},o.a.createElement(b.a,{m:2,colorScheme:"blue",onClick:function(){return e=t,re(),s({type:"RESTORE_HISTORY_ENTRY",value:e});var e}},"Restore into forms"),o.a.createElement(b.a,{m:2,colorScheme:"red",onClick:function(){return s({type:"DELETE_HISTORY_ENTRY",value:t})}},"Delete from history"))),!!e.length&&o.a.createElement(u.a,{justify:"center",py:1},o.a.createElement(b.a,{m:2,colorScheme:"red",variant:"outline",onClick:function(){return i(!0)}},"Clear history"),o.a.createElement(h.a,{isOpen:l,leastDestructiveRef:y,onClose:c},o.a.createElement(E.f,null),o.a.createElement(h.b,null,o.a.createElement(E.e,{fontSize:"lg",fontWeight:"bold"},"Clear forms"),o.a.createElement(E.b,null,"Are you sure you want to clear all history entries? You cannot undo this action afterwards."),o.a.createElement(E.d,null,o.a.createElement(b.a,{ref:y,onClick:c},"Cancel"),o.a.createElement(b.a,{colorScheme:"red",onClick:function(){f(),c()},ml:3},"Clear history"))))))},qe=a(339),Xe=a(340),Ke=a(341),Ze=function(){var e=Object(le.c)((function(e){return function(e){if(function(e){var t=e.streamDetails,a=e.playerOptions;return e.ui.advancedMode?a.isModified||[t.streamResource,t.drmLicenseResource,t.drmCertificateResource,t.subtitlesResource].some((function(e){return e.url||e.headers.some((function(e){return e.name||e.value}))||e.useProxy})):!!t.streamResource.url}(e)){if(e.ui.advancedMode){var t=e.streamDetails,a=(t.supportedDrmTechnologies,Object(D.a)(t,["supportedDrmTechnologies"])),r=e.playerOptions;r.isModified;return{streamDetails:a,playerOptions:Object(D.a)(r,["isModified"])}}var n=e.streamDetails.streamResource;n.headers,n.useProxy;return{streamDetails:{streamResource:Object(D.a)(n,["headers","useProxy"])}}}}(e)})),t=e?ae(e,document.location):"",a=Object(qe.a)(t),n=a.onCopy,l=a.hasCopied;return e?o.a.createElement(m.a,{mx:4},o.a.createElement(N,{level:r.H4},"Share your stream setup"),o.a.createElement(p.a,{userSelect:"none",mb:2},"This Streamlab page, with the"," ","playerOptions"in e?"stream details and player options":"stream specified"," to the left pre-filled and ready to be played, can be shared through the following link:"),o.a.createElement(p.a,{backgroundColor:"white",borderRadius:"md",cursor:"text",p:2,wordBreak:"break-all"},t),o.a.createElement(b.a,{colorScheme:"blue",my:4,mx:"auto",display:"block",leftIcon:l?o.a.createElement(Xe.a,null):o.a.createElement(Ke.a,null),onClick:n},"Copy to clipboard")):o.a.createElement(m.a,{mx:4},o.a.createElement(N,{level:r.H4},"Share your stream setup"),o.a.createElement(p.a,{userSelect:"none",mb:2},"When you have filled in stream details and/or set some player options, you can share this page with the full setup in a link appearing here."))};!function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(Ye||(Ye={}));var $e=function(){var e=Object(le.b)(),t=Object(le.c)((function(e){return e.ui.rightPaneActiveTabIndex})),a=Object(le.c)((function(e){return e.information.messages.filter((function(e){return e.level===Ye.ERROR})).length}));return o.a.createElement(Ie.e,{flex:"1 1 auto",display:"flex",flexDirection:"column",alignContent:"stretch",isFitted:!0,backgroundColor:"gray.100",height:"100vh",index:t,onChange:function(t){return e({type:"RIGHT_PANE_TAB_CHANGE",value:t})}},o.a.createElement(Ie.b,{flex:"0 0 auto",backgroundColor:"white"},o.a.createElement(Ie.a,null,"Info"," ",t>0&&a>0&&o.a.createElement(we.a,{ml:2,colorScheme:"red",variant:"solid"},a)),o.a.createElement(Ie.a,null,"History"),o.a.createElement(Ie.a,null,"Sharing")),o.a.createElement(Ie.d,{flex:"1 1 auto",overflowY:"auto",outline:"none"},o.a.createElement(Ie.c,{p:0},o.a.createElement(He,null)),o.a.createElement(Ie.c,{p:0},o.a.createElement(Je,null)),o.a.createElement(Ie.c,{p:0},o.a.createElement(Ze,null))))},Qe=[{key:I.AUTO,label:"Autodetect stream technology"},{key:w.DASH,label:"MPEG-DASH"},{key:w.HLS,label:"HLS"},{key:w.PROGRESSIVE,label:"Progressive video"}],et=function(){var e,t=Object(le.c)((function(e){return e.streamDetails.streamResource})),a=Object(le.b)();return o.a.createElement(m.a,{as:"form",my:8,onSubmit:function(e){e.preventDefault(),a(De)}},o.a.createElement(N,{level:r.H3,fontSize:"md",textAlign:"center"},"Test progressive, HLS, MPEG-DASH, or smooth streams:"),o.a.createElement(v.a,{isRequired:!0,m:4,width:"auto"},o.a.createElement(g.a,{placeholder:"Stream URL",type:"url",textAlign:"center",value:t.url,onChange:function(e){re(),a(ne({streamResource:{url:e.target.value}}))}})),o.a.createElement(u.a,{justify:"center",mx:4},o.a.createElement(R.a,null,o.a.createElement(R.b,{as:b.a,rightIcon:o.a.createElement(A.a,null),flex:"0 0 none",ml:2},(e=t.technology,(Qe.find((function(t){return t.key===e}))||Qe[0]).label)),o.a.createElement(R.d,null,Qe.map((function(e){var t=e.key,r=e.label;return o.a.createElement(R.c,{key:t,onClick:function(){return e=t,re(),void a(ne({streamResource:{technology:e}}));var e}},r)})))),o.a.createElement(b.a,{colorScheme:"green",mx:4,onClick:function(e){return e.currentTarget.blur(),a(De)},isDisabled:!t.url},"Play")))},tt=a(195),at=a(184),rt=a(350),nt=a(185),ot=a.n(nt),lt=a(186),it=a.n(lt),ct=a(112),st=a.n(ct),ut=a(113),mt=a.n(ut),dt=a(114),ft=a.n(dt),pt=a(115),yt=a.n(pt),bt=a(187),ht=a.n(bt),Et=function(e){return function(e,t,a,r){switch(a){case"HTML":return o.a.createElement(mt.a,r);case"SHAKA_PLAYER":return window.muxjs=ht.a,o.a.createElement(st.a,r);case"HLS_JS":return o.a.createElement(ft.a,r);case"RX_PLAYER":return o.a.createElement(yt.a,r);default:switch(e&&"string"!==typeof e&&"contentType"in e?e.contentType:""){case F[w.DASH]:return o.a.createElement(st.a,r);case F[w.MSS]:return o.a.createElement(yt.a,r);case F[w.HLS]:return function(e){return e.indexOf("Safari")>0&&e.indexOf("Chrome")<0&&e.indexOf("Firefox")<0}(t)?o.a.createElement(mt.a,r):o.a.createElement(ft.a,r);default:return o.a.createElement(it.a,r)}}}(e.source,navigator.userAgent,e.playerLibraryOverride,e)},Ot={interactionDetector:{inactivityDelay:-1}},vt=function(e){window.player||(window.player={}),window.player.state||(window.player.state={});for(var t=0,a=Object.entries(e);t<a.length;t++){var r=Object(d.a)(a[t],2),n=r[0],o=r[1];window.player.state[n]=o}},gt=function(e){window.player=e,window.player.state={},console.log("Streamlab v".concat("3.1.1")),console.info("Playback methods and playback state is exposed to a global %cplayer %cobject. Expand for details:","font-weight: bold; color: orange;","font-weight: normal; color: inherit"),console.dir(window.player),console.info("Start playing a stream. then type e.g. %cplayer.setPosition(123), %cto seek to 02:03, or %cplayer.state.position %cto get the current playback position.","font-weight: bold; color: orange;","font-weight: normal; color: inherit","font-weight: bold; color: orange;","font-weight: normal; color: inherit")},Rt=function(){var e=Object(le.c)((function(e){return Object(O.a)({},e.player)})),t=e.source,a=e.options,r=e.playerLibraryOverride,n=Object(le.b)();return o.a.createElement(m.a,{my:1,p:4,position:"relative"},o.a.createElement(at.Replay,{source:t,options:t?a:Object(O.a)(Object(O.a)({},a),Ot),onError:function(e){return n((t=e,function(e){if(t instanceof Error){if(t.sourceError&&(t.sourceError.loader||t.sourceError.frag&&t.sourceError.frag.loader)){var a=t.sourceError,r=(a.loader,a.context,a.frag,Object(D.a)(a,["loader","context","frag"]));t.sourceError=r,e({type:"PLAYER_ERROR",error:t})}else e({type:"PLAYER_ERROR",error:t});console.error("Playback error: %s",t.message)}else e({type:"PLAYER_ERROR",error:new Error(t)}),console.error("Playback error:",t);console.dir(t)}));var t},onExit:t?function(){return n(Te)}:void 0,onStreamStateChange:vt,onPlaybackActionsReady:gt},o.a.createElement(Et,{playerLibraryOverride:r})),!t&&o.a.createElement(u.a,{position:"absolute",left:0,right:0,top:0,direction:"column",pt:12,alignItems:"center",opacity:.7},o.a.createElement(p.a,{width:"20%",mt:6},o.a.createElement(be.a,{href:"https://vimond.github.io/replay/",isExternal:!0},o.a.createElement(rt.a,{src:ot.a,alt:"Replay",width:"8rem",margin:"0 auto"}))),o.a.createElement(p.a,{color:"white",mt:6},"The"," ",o.a.createElement(be.a,{href:"https://vimond.github.io/replay/",isExternal:!0,style:{textDecoration:"underline"}},"open source")," ","React video player from"," ",o.a.createElement(be.a,{href:"https://vimond.com",isExternal:!0,style:{textDecoration:"underline"}},"Vimond"),".")))},St=a(188),jt=a.n(St),At=function(){var e=Object(le.c)((function(e){return e.ui.advancedMode})),t=Object(le.c)((function(e){return e.ui.isRightPaneExpanded})),a=Object(le.b)();return o.a.createElement(u.a,{direction:"row",align:"center",backgroundColor:"gray.200",flex:"0 0 auto"},o.a.createElement(N,{level:r.H1,flex:"1 1 auto",display:"flex",flexDirection:"row",alignItems:"center"},o.a.createElement(be.a,{href:"https://github.com/vimond/streamlab",isExternal:!0},o.a.createElement(rt.a,{src:jt.a,alt:"Streamlab",width:"10rem",opacity:.8}))),o.a.createElement(v.a,{flex:"0",p:1,mt:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},o.a.createElement(S.a,{id:"advanced-switch",isChecked:e,onChange:function(e){re(),a({type:"TOGGLE_ADVANCED_MODE",value:e.target.checked})}},"\xa0"),o.a.createElement(j.a,{ml:2,mt:1,fontSize:"sm",htmlFor:"advanced-switch"},"Advanced")),o.a.createElement(b.a,{width:"auto",minWidth:"auto",height:"auto",flex:"0",ml:4,p:1,title:"".concat(t?"Collapse":"Expand"," sidebar"),onClick:function(e){return a({type:"TOGGLE_RIGHT_PANE",value:"\u2039"===e.currentTarget.textContent})}},t?"\u203a":"\u2039"))},Dt=(a(303),a(304),Object(c.a)({components:{Menu:{baseStyle:{list:{zIndex:5}}}}})),Lt=function(){return{backgroundColor:"#E2E8F0",width:"4px"}},Tt=function(){var e=Object(le.c)((function(e){return e.ui.advancedMode})),t=Object(le.c)((function(e){return e.ui.rightPaneWidth||33})),a=Object(le.c)((function(e){return e.ui.isRightPaneExpanded})),r=Object(le.b)();return Object(n.useEffect)((function(){r(oe(navigator.userAgent,document.location.search))}),[r]),o.a.createElement(s.a,{theme:Dt},o.a.createElement(tt.a,{onDragEnd:function(e){return r({type:"PANE_RESIZE",value:e[1]})},sizes:[100-t,t],direction:"horizontal",cursor:"col-resize",gutterAlign:"end",gutterSize:4,gutterStyle:Lt,collapsed:a?void 0:1,minSize:a?300:0,style:{display:"flex"}},o.a.createElement(u.a,{height:"100vh",direction:"column"},o.a.createElement(At,null),o.a.createElement(m.a,{flex:"1 1 auto",overflowY:"auto"},e?o.a.createElement(xe,null):o.a.createElement(et,null),o.a.createElement(Rt,null))),o.a.createElement($e,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ct,xt=a(189),It=a(33),wt=a(190),kt=a(191),_t=a(72),Pt=a(192),Nt=a.n(Pt),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{advancedMode:!1,expandedAdvancedAccordionIndices:[0],rightPaneActiveTabIndex:0,isRightPaneExpanded:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":if(t.value.urlSetup){var a="playerOptions"in t.value.urlSetup,r=a?[0,1]:e.expandedAdvancedAccordionIndices,n=0,o=!0;return Object(O.a)(Object(O.a)({},e),{},{advancedMode:a,expandedAdvancedAccordionIndices:r,rightPaneActiveTabIndex:n,isRightPaneExpanded:o})}return e;case"TOGGLE_ADVANCED_MODE":return Object(O.a)(Object(O.a)({},e),{},{advancedMode:t.value});case"RESTORE_HISTORY_ENTRY":return"drmLicenseResource"in t.value.formData.streamDetails?Object(O.a)(Object(O.a)({},e),{},{advancedMode:!0}):e;case"PANE_RESIZE":return Object(O.a)(Object(O.a)({},e),{},{rightPaneWidth:t.value});case"TOGGLE_RIGHT_PANE":return Object(O.a)(Object(O.a)({},e),{},{isRightPaneExpanded:t.value});case"ADVANCED_ACCORDION_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{expandedAdvancedAccordionIndices:t.value});case"RIGHT_PANE_TAB_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{rightPaneActiveTabIndex:t.value});default:return e}},Mt=function(){return{url:"",headers:[],useProxy:!1,technology:I.AUTO}},Yt=function(){return{streamResource:Mt(),drmLicenseResource:Mt(),drmCertificateResource:Mt(),subtitlesResource:Mt(),supportedDrmTechnologies:[],isDrmCertificateApplicable:!0,startOffset:""}},Ut=function(e){return e!==k.PLAYREADY},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":var a=t.value,r=a.supportedDrmTechnologies,n=a.urlSetup,o=r[0],l=Ut(o);if(n){var i=Yt();return Object(O.a)(Object(O.a)(Object(O.a)({},i),{},{isDrmCertificateApplicable:l},n.streamDetails),{},{streamResource:Object(O.a)(Object(O.a)({},i.streamResource),n.streamDetails.streamResource),supportedDrmTechnologies:r})}return Object(O.a)(Object(O.a)({},e),{},{supportedDrmTechnologies:r,isDrmCertificateApplicable:l,drmLicenseResource:Object(O.a)(Object(O.a)({},e.drmLicenseResource),{},{technology:o}),drmCertificateResource:Object(O.a)(Object(O.a)({},e.drmCertificateResource),{},{technology:o})});case"STREAM_RESOURCE_FIELD_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{streamResource:Object(O.a)(Object(O.a)({},e.streamResource),t.value)});case"DRM_LICENSE_RESOURCE_FIELD_CHANGE":var c=Object(O.a)(Object(O.a)({},e),{},{isDrmCertificateApplicable:Ut(t.value.technology),drmLicenseResource:Object(O.a)(Object(O.a)({},e.drmLicenseResource),t.value)});return"technology"in t.value&&t.value.technology?Object(O.a)(Object(O.a)({},c),{},{drmCertificateResource:Object(O.a)(Object(O.a)({},e.drmCertificateResource),{},{technology:t.value.technology})}):c;case"DRM_CERTIFICATE_RESOURCE_FIELD_CHANGE":var s=Object(O.a)(Object(O.a)({},e),{},{isDrmCertificateApplicable:Ut(t.value.technology),drmCertificateResource:Object(O.a)(Object(O.a)({},e.drmCertificateResource),t.value)});return"technology"in t.value&&null!=t.value.technology?Object(O.a)(Object(O.a)({},s),{},{drmLicenseResource:Object(O.a)(Object(O.a)({},e.drmLicenseResource),{},{technology:t.value.technology})}):s;case"SUBTITLES_RESOURCE_FIELD_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{subtitlesResource:Object(O.a)(Object(O.a)({},e.subtitlesResource),t.value)});case"START_OFFSET_FIELD_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{startOffset:t.value});case"RESTORE_HISTORY_ENTRY":var u=Yt(),m=e.supportedDrmTechnologies;return Object(O.a)(Object(O.a)(Object(O.a)({},u),t.value.formData.streamDetails),{},{streamResource:Object(O.a)(Object(O.a)({},u.streamResource),t.value.formData.streamDetails.streamResource),supportedDrmTechnologies:m});case"CLEAR_FORMS":return{isDrmCertificateApplicable:e.isDrmCertificateApplicable,supportedDrmTechnologies:e.supportedDrmTechnologies,streamResource:Mt(),drmLicenseResource:Object(O.a)(Object(O.a)({},Mt()),{},{technology:e.drmLicenseResource.technology}),drmCertificateResource:Object(O.a)(Object(O.a)({},Mt()),{},{technology:e.drmCertificateResource.technology}),subtitlesResource:Mt(),startOffset:""};default:return e}},Gt={source:void 0,options:{interactionDetector:{inactivityDelay:-1}},playerLibraryOverride:void 0},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAY":var a=t.value,r=a.source,n=a.options,o=a.playerLibraryOverride;return{source:r,options:n,playerLibraryOverride:o};case"STOP":case"CLEAR_FORMS":return Gt;case"PLAYER_ERROR":return Object(O.a)(Object(O.a)({},Gt),{},{error:t.error})}return e},Vt={logLevel:U,showPlaybackMonitor:!1,customConfiguration:"",playerLibrary:"AUTO",isModified:!1},Bt=function(e){var t=e.logLevel,a=e.showPlaybackMonitor,r=e.customConfiguration,n=e.playerLibrary;return t===Vt.logLevel&&a===Vt.showPlaybackMonitor&&r===Vt.customConfiguration&&n===Vt.playerLibrary},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_BROWSER_ENVIRONMENT":return t.value.urlSetup&&"playerOptions"in t.value.urlSetup&&t.value.urlSetup.playerOptions&&Object.keys(t.value.urlSetup.playerOptions).length>=0?Object(O.a)(Object(O.a)(Object(O.a)({},e),t.value.urlSetup.playerOptions),{},{isModified:!Bt(Object(O.a)(Object(O.a)({},e),t.value.urlSetup.playerOptions))}):e;case"SET_LOG_LEVEL":return Object(O.a)(Object(O.a)({},e),{},{logLevel:t.value,isModified:!Bt(Object(O.a)(Object(O.a)({},e),{},{logLevel:t.value}))});case"SET_PLAYER_LIBRARY":return Object(O.a)(Object(O.a)({},e),{},{playerLibrary:t.value,isModified:!Bt(Object(O.a)(Object(O.a)({},e),{},{playerLibrary:t.value}))});case"TOGGLE_PLAYBACK_MONITOR":return Object(O.a)(Object(O.a)({},e),{},{showPlaybackMonitor:t.value,isModified:!Bt(Object(O.a)(Object(O.a)({},e),{},{showPlaybackMonitor:t.value}))});case"SET_PLAYER_CONFIGURATION":return Object(O.a)(Object(O.a)({},e),{},{customConfiguration:t.value,isModified:!Bt(Object(O.a)(Object(O.a)({},e),{},{customConfiguration:t.value}))});case"CLEAR_FORMS":return Vt;case"RESTORE_HISTORY_ENTRY":if("playerOptions"in t.value.formData){var a=t.value.formData.playerOptions;if(a)return Object(O.a)(Object(O.a)({},a),{},{isModified:!Bt(Object(O.a)(Object(O.a)({},a),{},{isModified:!1}))})}default:return e}},Jt=function(e){var t=Object(d.a)(e,2),a=(t[0],t[1]);return!(null==a||""===a||Array.isArray(a)&&0===a.length||"number"===typeof a&&Number.isNaN(a))},qt=function(e,t){var a=Object(d.a)(e,1)[0],r=Object(d.a)(t,1)[0];return a.localeCompare(r,"en-US")},Xt=function(e){return null!=e&&e.constructor==={}.constructor},Kt=function e(t,a){if(t===a)return!0;if(Array.isArray(t)&&Array.isArray(a)){if(t.length===a.length){for(var r=t.length;r--;)if(!e(t[r],a[r]))return!1;return!0}return!1}if(Xt(t)&&Xt(a)){var n=Object.entries(t).filter(Jt).sort(qt),o=Object.entries(a).filter(Jt).sort(qt);if(n.length!==o.length)return!1;for(var l=n.length;l--;)if(n[l][0]!==o[l][0]||!e(n[l][1],o[l][1]))return!1;return!0}return!1},Zt=function(e,t){var a=e.findIndex((function(e){return Kt(e.formData,t.formData)}));if(-1!==a){var r=e[a].name,n=e.slice(0);return n.splice(a,1),n.concat(Object(O.a)(Object(O.a)({},t),{},{name:r}))}return e.concat(t)},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{history:[],historyListFilter:ve.BOTH},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_HISTORY_ENTRY":return e.selectedEntry&&e.selectedEntry.timestamp===t.value.timestamp?Object(O.a)(Object(O.a)({},e),{},{selectedEntry:void 0}):Object(O.a)(Object(O.a)({},e),{},{selectedEntry:t.value});case"UPDATE_HISTORY_ENTRY_NAME":if(e.selectedEntry){var a=e.history.slice(0),r=a.findIndex((function(t){return t.timestamp===(e.selectedEntry&&e.selectedEntry.timestamp)}));return-1!==r&&(a[r]=Object(O.a)(Object(O.a)({},a[r]),{},{name:t.value})),Object(O.a)(Object(O.a)({},e),{},{history:a,selectedEntry:Object(O.a)(Object(O.a)({},e.selectedEntry),{},{name:t.value})})}return e;case"DELETE_HISTORY_ENTRY":var n=e.history.findIndex((function(e){return e.timestamp===t.value.timestamp})),o=e.history.slice(0);return o.splice(n,1),Object(O.a)(Object(O.a)({},e),{},{selectedEntry:void 0,history:o});case"DELETE_HISTORY":return{history:[],historyListFilter:e.historyListFilter};case"SET_HISTORY_LIST_FILTER":return Object(O.a)(Object(O.a)({},e),{},{historyListFilter:t.value});case"PLAY":var l=Zt(e.history,t.value.historyEntry),i=e.selectedEntry&&Kt(e.selectedEntry.formData,t.value.historyEntry.formData)?Object(O.a)(Object(O.a)({},t.value.historyEntry),{},{name:e.selectedEntry.name}):e.selectedEntry;return Object(O.a)(Object(O.a)({},e),{},{history:l,selectedEntry:i});case"PLAYER_ERROR":var c=e.history,s=c.slice(0,c.length-1),u=c[c.length-1];return s.push(Object(O.a)(Object(O.a)({},u),{},{error:t.error})),Object(O.a)(Object(O.a)({},e),{},{history:s});default:return e}},Qt=a(193),ea=function(e,t){return function(a,r,n){return r.type===Qt.REHYDRATE?Object(O.a)(Object(O.a)(Object(O.a)({},n),r.payload),{},{information:{messages:t(e,a,r,Object(O.a)(Object(O.a)({},n),r.payload))}}):Object(O.a)(Object(O.a)({},n),{},{information:{messages:t(e,a,r,n)}})}},ta={AUTO:{label:"",link:void 0},SHAKA_PLAYER:{label:"the Shaka Player library",link:"https://github.com/google/shaka-player"},HLS_JS:{label:"the HLS.js library",link:"https://github.com/video-dev/hls.js"},RX_PLAYER:{label:"the RxPlayer library",link:"https://github.com/canalplus/rx-player"},HTML:{label:"the browser's native support through the HTML <video> element",link:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video"},HLS_SAFARI:{label:"Safari's native HLS support through HTML video element",link:"https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari"}},aa=(Ct={},Object(H.a)(Ct,I.AUTO,"AUTO"),Object(H.a)(Ct,w.DASH,"SHAKA_PLAYER"),Object(H.a)(Ct,w.HLS,"HLS_JS"),Object(H.a)(Ct,w.MSS,"RX_PLAYER"),Object(H.a)(Ct,w.PROGRESSIVE,"HTML"),Ct),ra={SHAKA_PLAYER:[w.DASH,w.HLS],HLS_JS:[w.HLS],RX_PLAYER:[w.DASH,w.MSS],HTML:[w.PROGRESSIVE],SAFARI:[w.HLS,w.PROGRESSIVE]},na=function(e){var t=e.url,a=e.technology;return a===I.AUTO?X(t):a},oa=function(e){var t=e.streamDetails.streamResource.technology,a=e.ui.advancedMode?e.playerOptions.playerLibrary:"AUTO",r=e.streamDetails.supportedDrmTechnologies&&e.streamDetails.supportedDrmTechnologies[0]===k.FAIRPLAY;return{technology:t===I.AUTO?X(e.streamDetails.streamResource.url):t,playerLibrary:a,isSafari:r}},la=[{id:"welcome-1",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&0===t.history.history.length},message:{level:Ye.INFO,text:"Welcome to Streamlab, created by Vimond developers.",link:"https://github.com/vimond/streamlab"}},{id:"share",displayCondition:function(e){var t=e.action;return"APPLY_BROWSER_ENVIRONMENT"===t.type&&!!t.value.urlSetup},message:{level:Ye.SUCCESS,text:"The shared stream setup found in the URL is now applied to the form to the left. Press Play to try it out."}},{id:"start-basic",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&!t.ui.advancedMode},message:{level:Ye.INFO,text:"Fill in an URL to the stream you want to test, and press Play. Flip the Advanced switch for more options."}},{id:"start-advanced",displayCondition:function(e){var t=e.nextState;return""===t.streamDetails.streamResource.url&&t.ui.advancedMode},message:{level:Ye.INFO,text:"Fill in an URL to the stream you want to test. Supplement with DRM information if required, or subtitles file URLs if desired. License requests can have headers added for e.g. authorization."}},{id:"pane-resize",displayCondition:function(e){var t=e.nextState;return t.history.history.length>0&&t.history.history.length<3&&!t.ui.rightPaneWidth},message:{level:Ye.INFO,text:"This pane can be resized by dragging the gutter to the left. Also note the expand/collapse button next to the Advanced toggle."}},{id:"basic-play",displayCondition:function(e){var t=e.nextState;return t.streamDetails.streamResource.technology!==I.AUTO&&""!==t.streamDetails.streamResource.url&&!t.player.source},message:{level:Ye.INFO,text:"Press Play to load the specified stream URL in the player."}},{id:"stream-autodetect",displayCondition:function(e){var t=e.nextState;return t.streamDetails.streamResource.technology===I.AUTO&&""!==t.streamDetails.streamResource.url},message:function(e,t){var a=q(e.streamDetails.streamResource.url),r="PLAYER_ERROR"===t.type||e.player.source;return a?{level:Ye.SUCCESS,text:"Auto detected stream type is ".concat(a.label,". ").concat(r?"":"Press Play to load it into the player.")}:{level:Ye.ERROR,text:"Unable to detect stream type based on URL content. Please select the technology from the dropdown."}}},{id:"player-lib-support",displayCondition:function(e){var t=e.nextState;return(!("error"in t.player)||!t.player.error)&&""!==t.streamDetails.streamResource.url&&!!na(t.streamDetails.streamResource)},message:function(e,t){var a=oa(e),r=a.technology,n=a.playerLibrary;return function(e,t,a){var r=a&&"AUTO"!==a;if(e){if(r){var n=ta[a],o=n.label,l=n.link;return{level:Ye.INFO,text:"In Player options, ".concat(o," is selected for playing this stream."),link:l}}var i=t&&e===w.HLS?ta.HLS_SAFARI:ta[aa[e]],c=i.label,s=i.link;return{level:Ye.INFO,text:"The player will use ".concat(c," for playing this stream."),link:s}}return{level:Ye.ERROR,text:r?"Undetected stream technology. However ".concat(ta[a].label," is selected for playing this stream."):"Undecided stream technology. Unable to select a playback technology."}}(r,a.isSafari,n)}},{id:"player-lib-unsupported",displayCondition:function(e){return function(e){var t=oa(e),a=t.playerLibrary,r=t.technology,n=t.isSafari;return!(!a||"AUTO"===a||!r)&&(n&&"HTML"===a?!ra.SAFARI.includes(r):!ra[a].includes(r))}(e.nextState)},message:function(e){var t=oa(e),a=t.technology,r=t.playerLibrary,n=a===w.MSS?"smooth":(B.find((function(e){return e.key===a}))||{key:I.AUTO,label:"unknown"}).label,o="HTML"===r?"this browser":Y[r];return{level:Ye.WARNING,text:"However, ".concat(o," is not known to be capable of playing ").concat(n," streams.")}}},{id:"limited-rx-player-support",displayCondition:function(e){var t=e.nextState;return(!("error"in t.player)||!t.player.error)&&""!==t.streamDetails.streamResource.url&&"RX_PLAYER"===function(e){var t=oa(e),a=t.technology,r=t.playerLibrary;return r&&"AUTO"!==r?r:a?aa[a]:void 0}(t)},message:{level:Ye.WARNING,text:"Note that the integration with the RxPlayer library is not complete, and lacks support for subtitles and controls for bitrate + multiple audio tracks."}},{id:"subtitles-autodetect",displayCondition:function(e){var t=e.nextState;return t.streamDetails.subtitlesResource.technology===I.AUTO&&""!==t.streamDetails.subtitlesResource.url},message:function(e,t){var a=K(e.streamDetails.subtitlesResource.url);return a?{level:Ye.INFO,text:"Auto detected subtitles type is ".concat(Z(a,J),".")}:{level:Ye.WARNING,text:"Unable to detect subtitles type based on URL content. Please select the technology from the dropdown."}}},{id:"subtitles-incompatible",displayCondition:function(e){var t=e.nextState;return""!==t.streamDetails.subtitlesResource.url&&(t.streamDetails.subtitlesResource.technology===_.TTML||t.streamDetails.subtitlesResource.technology===I.AUTO&&K(t.streamDetails.subtitlesResource.url)===_.TTML)&&na(t.streamDetails.streamResource)!==w.DASH},message:{level:Ye.WARNING,text:"The subtitles format, TTML, is only supported for DASH streams through Shaka Player."}},{id:"player-error",displayCondition:function(e){return"error"in e.nextState.player},message:function(e,t){return{level:Ye.ERROR,text:"Player error: ".concat("error"in e.player&&e.player.error&&e.player.error.message,". The full error object is logged to the browser console.")}}},{id:"monitor",displayCondition:function(e){var t=e.nextState;return!!t.player.source&&!t.playerOptions.showPlaybackMonitor},message:{level:Ye.INFO,text:"Press Ctrl+Alt+M to reveal a panel with all properties of the playback state."}},{id:"share-incompatible-drm",displayCondition:function(e){var t=e.nextState,a=e.action;return!!("APPLY_BROWSER_ENVIRONMENT"===a.type&&a.value.urlSetup&&"drmLicenseResource"in a.value.urlSetup.streamDetails&&""!==a.value.urlSetup.streamDetails.drmLicenseResource.url&&a.value.urlSetup.streamDetails.drmLicenseResource.technology&&t.streamDetails.supportedDrmTechnologies.indexOf(a.value.urlSetup.streamDetails.drmLicenseResource.technology)<0)},message:{level:Ye.ERROR,text:"The shared link specified an unsupported DRM technology, and can perhaps not be used for playback in this browser. Consider testing it in a different browser."}},{id:"drm-auto-detect",displayCondition:function(e){return e.nextState.ui.advancedMode},message:function(e,t){return{level:Ye.INFO,text:"This browser supports ".concat((e.streamDetails.supportedDrmTechnologies||[]).map((function(e){return Z(e,z)})).join(" and ")," for DRM playback.")}}},{id:"drm-fairplay-certificate",displayCondition:function(e){var t=e.nextState;return t.ui.advancedMode&&!!t.streamDetails.drmLicenseResource.url&&!t.streamDetails.drmCertificateResource.url&&t.streamDetails.drmLicenseResource.technology===k.FAIRPLAY},message:{level:Ye.WARNING,text:"When playing a stream with FairPlay DRM encryption, a certificate URL for the content provider needs to be specified."}},{id:"drm-widevine-certificate",displayCondition:function(e){var t=e.nextState;return t.ui.advancedMode&&!!t.streamDetails.drmLicenseResource.url&&!t.streamDetails.drmCertificateResource.url&&t.streamDetails.drmLicenseResource.technology===k.WIDEVINE},message:{level:Ye.INFO,text:"When no DRM certificate URL is specified, the Widevine service's certificate will be fetched from the same URL as the DRM license. This will appear in DevTools as two similar requests to the license URL, however the payloads are different."}},{id:"player-options-invalid-json",displayCondition:function(e){var t=e.nextState;if(!(t.ui.advancedMode&&t.playerOptions.customConfiguration&&t.playerOptions.customConfiguration.trim()))return!1;try{return JSON.parse(t.playerOptions.customConfiguration),!1}catch(a){return!0}},message:{level:Ye.WARNING,text:"The player configuration overrides are not specified as valid JSON, and will be ignored."}}],ia=Object(It.combineReducers)({ui:Ht,streamDetails:Ft,player:Wt,playerOptions:zt,history:$t,information:function(){return{}}}),ca=ea(la,(function(e,t,a,r){return e.filter((function(e){return e.displayCondition({action:a,prevState:t,nextState:r})})).map((function(e){return"function"===typeof e.message?e.message(r,a):e.message}))})),sa=function(e){return Object(O.a)(Object(O.a)({},e),{},{playerLibrary:e&&e.playerLibrary||"AUTO"})},ua={1:function(e){return e?Object(O.a)(Object(O.a)({},e),{},{history:(t=e.history,t&&t.history?Object(O.a)(Object(O.a)({},t),{},{history:t.history.map((function(e){return"playerOptions"in e.formData?Object(O.a)(Object(O.a)({},e),{},{formData:Object(O.a)(Object(O.a)({},e.formData),{},{playerOptions:sa(e.formData.playerOptions)})}):e}))}):t),playerOptions:sa(e.playerOptions)}):e;var t}},ma={version:1,migrate:Object(_t.a)(ua,{debug:!0})},da=Object(O.a)(Object(O.a)({},ma),{},{key:"root",storage:Nt.a,blacklist:["player","information"]}),fa=Object(_t.b)(da,(function(e,t){return ca(e,t,ia(e,t))})),pa=function(){var e=Object(It.createStore)(fa,Object(wt.composeWithDevTools)(Object(It.applyMiddleware)(kt.a)));return{store:e,persistor:Object(_t.c)(e)}}(),ya=pa.store,ba=pa.persistor;i.a.render(o.a.createElement(le.a,{store:ya},o.a.createElement(xt.a,{persistor:ba},o.a.createElement(Tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[204,1,2]]]);
//# sourceMappingURL=main.f009e358.chunk.js.map